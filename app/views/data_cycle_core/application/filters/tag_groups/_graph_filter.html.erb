<%
  content_types = value["content_type"].is_a?(Array) ? value["content_type"] : [value["content_type"]]
  relation_types = value["relation_type"].is_a?(Array) ? value["relation_type"] : [value["relation_type"]]
  filter_restrictions = value["restriction"]
  stored_filter = value["filter"]
%>

<span class="tag-group tags <%= key %> <%= local_assigns[:filter_method] || 'i' %> <%= local_assigns[:container_classes] %>" data-id="<%= target %>">
  <span><span class="tag-group-label">
    <i class="fa fa-link" aria-hidden="true"></i>
    <%= t("filter.#{key}", default: title, locale: active_ui_locale) %>
  </span>

  <% if content_types&.first&.present? || (relation_types.present? && !relation_types.first&.blank?) %>
    <span class="tags-container">
    <% if content_types&.first&.present?%>
      <!-- Content Types -->
        <% content_types.each do |tag| %>
        <span class="tag"><%= DataCycleCore::ClassificationAlias.find(tag).internal_name if tag.present? %></span>
      <% end %>
    <% end %>

      <% if relation_types.present? && !relation_types.first&.blank?%>
      <!-- Content Types -->
        <% relation_types.each do |tag| %>
        <%
          next if tag.blank?
          parsed_tag = JSON.parse(tag)
        %>
          <span class="tag"><%= t("filter.#{parsed_tag[0]}", default: "", locale: active_ui_locale).split(' ')[1..-1]&.join(' ') %></span>
      <% end %>
    <% end %>
  </span>
  <% end %>

  </span>
  <span>

    <span class="tag-group-label">
      <%= t("filter.#{key}_2", default: "", locale: active_ui_locale) %>
  </span>

  <span class="tags-container">


    <% if filter_restrictions.present?%>
      <!-- Filter Restrictions -->
      <span class="tag"><%= filter_restrictions %></span>
    <% end %>


    <% if stored_filter.present?%>
      <!-- StoredFilter -->
      <span class="tag"><%= DataCycleCore::StoredFilter.find(stored_filter).name if stored_filter.present? %></span>
    <% end %>

  </span>

  </span>

  <%= render 'data_cycle_core/application/filters/tag_groups/advanced_buttons', local_assigns if buttons %>
</span>
