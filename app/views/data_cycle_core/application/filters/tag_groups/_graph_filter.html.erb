<%
  filter_type = DataCycleCore::ThingTemplate.translated_property_labels(keys: filter_advanced_type, locale: active_ui_locale)&.dig(filter_advanced_type)
%>

<span class="tag-group tags <%= key %> <%= local_assigns[:filter_method] || 'i' %> <%= local_assigns[:container_classes] %>" data-id="<%= target %>">
  <span class="tag-group-label">
    <%= render 'data_cycle_core/shared/icon', icon_type: key&.underscore_blanks, icon_class: 'filter' %>
    <% translated_label = safe_join([
      t("filter.graph_filter.input_ui.#{key}.prefix", default: title, locale: active_ui_locale),
      filter_type,
      filter_method_translation(DataCycleCore::DashboardFilterHelper::RELATION_FILTER_TYPES[filter_method], 'filter.graph_filter', key)
    ], ' ') %>
    <span data-dc-tooltip="<%= translated_label %>">
      <%= translated_label %>
    </span>
  </span>

  <% if !filter_method.in?(['p', 'b']) %>
    <span class="tags-container">
      <% relation_filter_items(value, filter_method).each do |item| %>
        <%= tag.span(item.name, class: "tag #{item.html_class}", data: { dc_tooltip: item.dc_tooltip }) %>
      <% end %>
    </span>
  <% end %>

  <%= render 'data_cycle_core/application/filters/tag_groups/advanced_buttons', local_assigns if buttons %>
</span>
